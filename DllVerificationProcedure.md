= Верификация библиотек интеллектов =

## Введение ##

Верификация библиотек необходима для того, чтобы исключить возможность мошенничества. Поскольку мошенники хитры и изворотливы, необходимо проверять дллку многими разными способами.

## Статическая проверка зависимостей ##

Часть проблем можно решить просто запретив пользоваться библиотеками, в которых есть ссылки на некоторые заранее известные библиотеки, такие, как System.Reflection, Sytem.IO и другие. Список сборок, на которые ссылается данная, легко проанализировать с помощью рефлексии.

Implementation note: этот список можно хранить в конфигурационном файле или в БД.

## Динамическая защита ##

Для защиты кода в рантайме используется .NET Security, которая ругается, если что-то пошло не так, как мы ожидаем.

## Испытание надёжности ##

Чтобы отсеять библиотеки, намеренно приводящие к системным ошибкам, предлагается проводить тестовые матчи с нашими тестовыми интеллектами. В случае возникновения OutOfMemoryException или StackOverflowException библиотека помечается как неодобренная, о чём пользователю приходит уведомление. См. также следующий раздел.

## Poison messages ##

Часть библиотек, однако, будет проявлять свои порочные свойства только в ряде случаев, приводя к невозможности обработки конкретно этой пары интеллектов. Если сообщение обрабатывается более одного раза, значит, что-то пошло не так. По стеку и дампу памяти во время исключения можно будет определить, из-за какой библиотеки произошло исключение. Библиотека будет считаться проигравшей в этом бою.

## Полезные ссылки ##
Пример того как использовать declarative security - http://habrahabr.ru/post/110999/

Мастрид на msdn Coda Access Security - http://msdn.microsoft.com/en-us/library/c5tk9z76.aspx

Мастрид по рефлексии - http://msdn.microsoft.com/en-us/library/f7ykdhsy.aspx